<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¶Ü‡¶á‡¶®‡ßá‡¶∞ ‡¶ñ‡ßá‡¶≤‡¶æ‡ßü ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡¶ø‡¶∞ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ - Black Force 007</title>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
  body {
    font-family: 'Arial', sans-serif;
    margin:0;
    padding:0;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:#fff;
    text-align:center;
  }
  #game-container {
    max-width:700px;
    margin:20px auto;
    background:#1f1f1f;
    border-radius:15px;
    padding:20px;
    box-shadow:0 0 20px rgba(0,0,0,0.7);
  }
  h1.title { font-size:2em; color:#ffd700; text-shadow: 2px 2px #000;}
  h3.subtitle { font-size:1.2em; color:#ff6347; margin-bottom:20px; }

  input {
    width:80%;
    padding:10px;
    margin:8px 0;
    border-radius:10px;
    border:none;
    outline:none;
  }
  button {
    padding:10px 25px;
    margin:5px;
    cursor:pointer;
    border:none;
    border-radius:10px;
    background:#ff6347;
    color:#fff;
    font-weight:bold;
    transition:0.3s;
  }
  button:hover { background:#ffd700; color:#000; transform:scale(1.05);}
  #options-container button {
    display:block;
    width:100%;
    margin:5px 0;
    font-size:1em;
    transition:0.3s;
  }
  #options-container button:hover { transform:scale(1.05); }
  .correct { background-color: #28a745 !important; color:#fff; font-weight:bold; font-size:1.2em; animation: glow 1s ease-in-out;}
  .wrong { background-color: #dc3545 !important; color:#fff; font-weight:bold; animation: shake 0.5s;}
  .hidden { display:none; }

  #leaderboard { margin-top:20px; background:#333; padding:10px; border-radius:10px;}
  #leaderboard-list li { margin:5px 0; color:#ffd700; font-weight:bold; }

  /* Animations */
  @keyframes glow {
    0% { box-shadow: 0 0 5px #28a745; }
    50% { box-shadow: 0 0 20px #28a745; }
    100% { box-shadow: 0 0 5px #28a745; }
  }
  @keyframes shake {
    0% { transform: translateX(0px);}
    25% { transform: translateX(-5px);}
    50% { transform: translateX(5px);}
    75% { transform: translateX(-5px);}
    100% { transform: translateX(0px);}
  }

  .player-info { margin-bottom:15px; font-weight:bold; }
  .question-box { background:#222; padding:15px; border-radius:10px; margin-bottom:15px; box-shadow:0 0 10px #000; }

  #timer { color:#ffd700; font-weight:bold; font-size:1.2em; }
  #coins { color:#00ffff; font-weight:bold; }

</style>
</head>
<body>

<div id="game-container">
  <h1 class="title">‡¶Ü‡¶á‡¶®‡ßá‡¶∞ ‡¶ñ‡ßá‡¶≤‡¶æ‡ßü ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡¶ø‡¶∞ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ</h1>
  <h3 class="subtitle">‚öîÔ∏è Black Force 007 ‚öîÔ∏è</h3>

  <!-- Login / Signup -->
  <div id="login-screen">
    <h2>Login / Signup ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
    <input type="email" id="email" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤">
    <input type="password" id="password" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
    <button onclick="signup()">Sign Up</button>
    <button onclick="login()">Login</button>
    <p id="auth-msg" style="color:red;"></p>
  </div>

  <!-- Quiz Screen -->
  <div id="quiz-screen" class="hidden">
    <div class="player-info">
      <p><strong>‡¶ñ‡ßá‡¶≤‡ßã‡¶Ø‡¶º‡¶æ‡¶°‡¶º:</strong> <span id="display-name"></span></p>
      <p>‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞: <span id="correct-count">0</span> | ‡¶≠‡ßÅ‡¶≤: <span id="wrong-count">0</span> | ‚è∞ <span id="timer">30</span> ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</p>
      <p>‡¶ï‡¶Ø‡¶º‡ßá‡¶® üí∞: <span id="coins">0</span></p>
    </div>

    <div class="question-box">
      <table><tr><th id="question-text"></th></tr></table>
    </div>

    <div id="options-container"></div>
    <button id="next-btn" class="hidden">‡¶™‡¶∞‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‚û°Ô∏è</button>

    <div id="leaderboard">
      <h3>üèÜ ‡¶≤‡¶ø‡¶°‡¶æ‡¶∞‡¶¨‡ßã‡¶∞‡ßç‡¶° üèÜ</h3>
      <ul id="leaderboard-list"></ul>
    </div>
  </div>
</div>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com/",
  projectId: "YOUR_PROJECT",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const database = firebase.database();

// Signup/Login
function signup(){
  const email=document.getElementById("email").value;
  const password=document.getElementById("password").value;
  auth.createUserWithEmailAndPassword(email,password)
  .then(user=>{ document.getElementById("login-screen").classList.add("hidden"); startQuiz(user.user); })
  .catch(e=>document.getElementById("auth-msg").innerText=e.message);
}
function login(){
  const email=document.getElementById("email").value;
  const password=document.getElementById("password").value;
  auth.signInWithEmailAndPassword(email,password)
  .then(user=>{ document.getElementById("login-screen").classList.add("hidden"); startQuiz(user.user); })
  .catch(e=>document.getElementById("auth-msg").innerText=e.message);
}

// Quiz Logic
let questions=[],currentQuestion=0,correctCount=0,wrongCount=0,coins=0,timerInterval,timeLeft=30,playerName="";
const nextBtn=document.getElementById("next-btn");

async function startQuiz(user){
  playerName=user.email;
  document.getElementById("quiz-screen").classList.remove("hidden");
  document.getElementById("display-name").innerText=playerName;
  const res=await fetch("questions.json");
  questions=await res.json();
  shuffleArray(questions);
  if(questions.length>30) questions=questions.slice(0,30);
  showQuestion();
  startTimer();
  loadLeaderboardFirebase();
}

function showQuestion(){
  document.getElementById("options-container").innerHTML="";
  const q=questions[currentQuestion];
  document.getElementById("question-text").innerText=q.question;
  let shuffled=[...q.options]; shuffleArray(shuffled);
  shuffled.forEach(opt=>{
    const btn=document.createElement("button");
    btn.innerText=opt;
    btn.classList.add("option");
    btn.addEventListener("click",()=>selectAnswer(btn,q.answer));
    document.getElementById("options-container").appendChild(btn);
  });
  nextBtn.classList.add("hidden");
}

function selectAnswer(btn,correctAns){
  const allOptions=document.querySelectorAll(".option");
  allOptions.forEach(b=>b.disabled=true);
  if(btn.innerText===correctAns){ btn.classList.add("correct"); correctCount++; coins+=10; }
  else{ btn.classList.add("wrong"); wrongCount++;
    allOptions.forEach(o=>{ if(o.innerText===correctAns) o.classList.add("correct"); });
  }
  document.getElementById("correct-count").innerText=correctCount;
  document.getElementById("wrong-count").innerText=wrongCount;
  document.getElementById("coins").innerText=coins;
  nextBtn.classList.remove("hidden");
}

nextBtn.addEventListener("click",()=>{
  currentQuestion++;
  if(currentQuestion<questions.length){ showQuestion(); resetTimer(); }
  else{ endGame(); }
});

function startTimer(){
  timeLeft=30;
  document.getElementById("timer").innerText=timeLeft;
  timerInterval=setInterval(()=>{
    timeLeft--;
    document.getElementById("timer").innerText=timeLeft;
    if(timeLeft<=0){ clearInterval(timerInterval); currentQuestion++; if(currentQuestion<questions.length){ showQuestion(); resetTimer(); } else{ endGame(); } }
  },1000);
}
function resetTimer(){ clearInterval(timerInterval); startTimer(); }
function shuffleArray(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } }

function endGame(){
  clearInterval(timerInterval);
  alert(`${playerName}, ‡¶ó‡ßá‡¶Æ ‡¶∂‡ßá‡¶∑! ‚úÖ\n‡¶∏‡¶†‡¶ø‡¶ï: ${correctCount} | ‡¶≠‡ßÅ‡¶≤: ${wrongCount} | ‡¶ï‡ßü‡ßá‡¶®: ${
